(()=>{"use strict";function e(e){return e.toString().toLowerCase().normalize("NFD").replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u0898-\u089F\u08C9-\u08D2\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C3C\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u1714\u1715\u1734\u17C9-\u17D3\u17DD\u1939-\u193B\u1A60\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABE\u1AC1-\u1ACB\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1BE6\u1BF2\u1BF3\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA806\uA82C\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDD4E\uDD69-\uDD6D\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC46\uDC70\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3B\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74\uDFCE-\uDFD0\uDFD2\uDFD3\uDFE1\uDFE2]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97\uDF41\uDF42\uDF5A]|\uD80D[\uDC47-\uDC55]|\uD818\uDD2F|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDD6B\uDD6C\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDC30-\uDC6D\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}function n(e,n){var t;t=n instanceof Blob?n:new Blob([n],{type:"text/plain"});var o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=e.replace(/\//g,"_"),document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),URL.revokeObjectURL(o)}),100)}function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.querySelector(".feedback");t&&t.remove();var o=document.createElement("div");function r(e){"Escape"===e.key&&(o.remove(),document.removeEventListener("keydown",r))}o.className="feedback",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.style.backgroundColor="success"===n?"#28a745":"#dc3545",o.style.color="#fff",o.innerHTML="<span>".concat(e,'</span>\n        <button class="gherkin-feedback-close" aria-label="Fechar feedback" tabindex="0">&times;</button>'),document.body.appendChild(o),o.querySelector(".gherkin-feedback-close").onclick=function(){return o.remove()},document.addEventListener("keydown",r),setTimeout((function(){o.parentNode&&o.remove(),document.removeEventListener("keydown",r)}),4e3)}function o(e){return e&&e.nodeType===Node.ELEMENT_NODE?function(e){var n=e.tagName.toLowerCase();if(e.id)return n+="#".concat(e.id);if(e.className){var t=e.className.split(" ").filter((function(e){return""!==e.trim()})).map((function(e){return".".concat(e)})).join("");n+=t}return["name","type","aria-label","data-pc-name"].forEach((function(t){e.hasAttribute(t)&&(n+="[".concat(t,'="').concat(e.getAttribute(t),'"]'))})),n}(e):null}function r(){return"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id}function a(e){}function i(){}window.showSpinner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Processando...";if(!document.getElementById("gherkin-spinner-modal")){var n=document.createElement("div");n.id="gherkin-spinner-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.18)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="2147483647";var t=document.createElement("div");t.style.background="#fff",t.style.padding="28px 32px 22px 32px",t.style.borderRadius="12px",t.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.gap="18px",t.style.minWidth="220px";var o=document.createElement("div");o.className="gherkin-spinner",o.style.marginBottom="12px",t.appendChild(o);var r=document.createElement("div");r.textContent=e,r.style.fontSize="16px",r.style.color="#0D47A1",r.style.textAlign="center",t.appendChild(r),n.appendChild(t),document.body.appendChild(n)}},window.hideSpinner=function(){var e=document.getElementById("gherkin-spinner-modal");e&&e.remove()};var c={nomePadraoFeature:"Nova Feature",nomePadraoCenario:"Novo Cenário",templateStep:{Given:"Given que o usuário {acao}",When:"When o usuário {acao}",Then:"Then o usuário {acao}"},templateUpload:'When faz upload do arquivo "{arquivo}" no campo {elemento}',templateLogin:'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"',templateEspera:"When espera o elemento aparecer: {seletor}"};function l(e){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.get("bddConfig",(function(n){e(Object.assign({},c,n.bddConfig||{}))})):e(c)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function d(e,n,t){return(n=function(e){var n=function(e){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=s(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}if(window.gherkinFeatures||(window.gherkinFeatures=[]),window.currentFeature||(window.currentFeature=null),window.currentCenario||(window.currentCenario=null),window.gherkinPanelState||(window.gherkinPanelState="feature"),void 0===window.isRecording&&(window.isRecording=!1),void 0===window.isPaused&&(window.isPaused=!1),void 0===window.timerInterval&&(window.timerInterval=null),void 0===window.elapsedSeconds&&(window.elapsedSeconds=0),window.interactions||(window.interactions=[]),!window.panel){window.panel=void 0,a(window.panel);var p=document.createElement("style");p.id="gherkin-panel-modern-style",p.innerHTML='\n    #gherkin-panel, .gherkin-panel {\n        font-family: \'Segoe UI\', Arial, sans-serif !important;\n        background: #fff;\n        color: #222;\n        border-radius: 12px;\n        box-shadow: 0 4px 24px rgba(0,0,0,0.10);\n        max-width: 480px;\n        min-width: 320px;\n        width: 96vw;\n        min-height: 320px;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        z-index: 2147483647;\n    }\n    .gherkin-panel-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: #f7faff;\n        border-bottom: 1px solid #e0e6ed;\n        padding: 18px 20px 12px 20px;\n        font-size: 1.25rem;\n        font-weight: bold;\n        color: #0070f3;\n        letter-spacing: 0.01em;\n        user-select: none;\n    }\n    .gherkin-panel-header .gherkin-panel-title {\n        font-size: 1.18rem;\n        font-weight: 700;\n        letter-spacing: 0.01em;\n    }\n    .gherkin-panel-header .gherkin-panel-actions {\n        display: flex;\n        gap: 8px;\n    }\n    .gherkin-panel-header button, .gherkin-panel-header .gherkin-close, .gherkin-panel-header .gherkin-minimize {\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 1.2rem;\n        padding: 2px 6px;\n        color: #e74c3c;\n        transition: color 0.2s;\n    }\n    .gherkin-panel-header .gherkin-minimize { color: #f1c40f; }\n    .gherkin-panel-header .gherkin-close:hover { color: #c0392b; }\n    .gherkin-panel-header .gherkin-minimize:hover { color: #b7950b; }\n\n    .gherkin-panel-content {\n        flex: 1 1 auto;\n        padding: 24px 24px 12px 24px;\n        display: flex;\n        flex-direction: column;\n        gap: 18px;\n        background: #fff;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content h2, .gherkin-panel-content h3 {\n        margin: 0 0 8px 0;\n        font-weight: 600;\n        color: #0070f3;\n    }\n    .gherkin-panel-content label {\n        font-weight: 500;\n        margin-bottom: 4px;\n        display: block;\n        color: #222;\n    }\n    .gherkin-panel-content input[type="text"], .gherkin-panel-content input[type="number"], .gherkin-panel-content textarea, .gherkin-panel-content select {\n        width: 100%;\n        padding: 10px 12px;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 6px;\n        font-size: 1rem;\n        margin-bottom: 10px;\n        background: #f9fbfd;\n        transition: border-color 0.2s;\n    }\n    .gherkin-panel-content input:focus, .gherkin-panel-content textarea:focus, .gherkin-panel-content select:focus {\n        outline: none;\n        border-color: #0070f3;\n        background: #fff;\n    }\n    .gherkin-panel-content input[aria-invalid="true"], .gherkin-panel-content textarea[aria-invalid="true"] {\n        border-color: #e74c3c;\n        background: #fff6f6;\n    }\n    .gherkin-panel-content .gherkin-actions-row {\n        display: flex;\n        gap: 12px;\n        margin: 12px 0 0 0;\n        flex-wrap: wrap;\n    }\n    .gherkin-panel-content button, .gherkin-panel-content .gherkin-btn {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        padding: 10px 18px;\n        border: none;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 600;\n        cursor: pointer;\n        transition: background 0.2s, color 0.2s, box-shadow 0.2s;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        margin-bottom: 0;\n        outline: none;\n    }\n    .gherkin-panel-content .gherkin-btn-primary {\n        background: #0070f3;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-primary:hover, .gherkin-panel-content .gherkin-btn-primary:focus {\n        background: #005bb5;\n    }\n    .gherkin-panel-content .gherkin-btn-success {\n        background: #28a745;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-success:hover, .gherkin-panel-content .gherkin-btn-success:focus {\n        background: #218838;\n    }\n    .gherkin-panel-content .gherkin-btn-danger {\n        background: #e74c3c;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-danger:hover, .gherkin-panel-content .gherkin-btn-danger:focus {\n        background: #c0392b;\n    }\n    .gherkin-panel-content .gherkin-btn-warning {\n        background: #ffc107;\n        color: #222;\n    }\n    .gherkin-panel-content .gherkin-btn-warning:hover, .gherkin-panel-content .gherkin-btn-warning:focus {\n        background: #e0a800;\n    }\n    .gherkin-panel-content .gherkin-btn[disabled], .gherkin-panel-content button[disabled] {\n        opacity: 0.6;\n        cursor: not-allowed;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        margin-bottom: 12px;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list label {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 400;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list input[type="checkbox"] {\n        accent-color: #0070f3;\n        width: 18px;\n        height: 18px;\n    }\n    .gherkin-panel-content .gherkin-feedback {\n        margin: 8px 0;\n        padding: 10px 14px;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 500;\n        background: #eafaf1;\n        color: #218838;\n        border: 1.5px solid #28a745;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        min-height: 40px;\n        transition: background 0.2s, color 0.2s;\n    }\n    .gherkin-panel-content .gherkin-feedback.error {\n        background: #fff6f6;\n        color: #e74c3c;\n        border-color: #e74c3c;\n    }\n    .gherkin-panel-content .gherkin-feedback.info {\n        background: #f7faff;\n        color: #0070f3;\n        border-color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-feedback .gherkin-feedback-icon {\n        font-size: 1.3em;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    .gherkin-panel-content .gherkin-tip {\n        background: #f7faff;\n        border-left: 4px solid #0070f3;\n        padding: 10px 16px;\n        border-radius: 6px;\n        color: #0070f3;\n        font-size: 0.98rem;\n        margin-bottom: 8px;\n        margin-top: 0;\n        display: flex;\n        align-items: flex-start;\n        gap: 8px;\n    }\n    .gherkin-panel-content .gherkin-tip .gherkin-tip-icon {\n        font-size: 1.2em;\n        margin-right: 4px;\n        color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-summary {\n        background: #f9fbfd;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 10px;\n        font-size: 0.98rem;\n        color: #222;\n        max-height: 180px;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content .gherkin-summary-title {\n        font-weight: 600;\n        color: #0070f3;\n        margin-bottom: 6px;\n        font-size: 1.05rem;\n    }\n    .gherkin-panel-content .gherkin-summary-list {\n        list-style: disc inside;\n        margin: 0;\n        padding: 0 0 0 10px;\n    }\n    .gherkin-panel-content .gherkin-summary-list li {\n        margin-bottom: 2px;\n        font-size: 0.97rem;\n    }\n    .gherkin-panel-content .gherkin-footer {\n        text-align: right;\n        font-size: 0.92rem;\n        color: #888;\n        margin-top: 10px;\n        margin-bottom: 2px;\n    }\n    /* Dropdown de ações (três pontos) */\n    .gherkin-action-dropdown {\n        position: absolute !important;\n        min-width: 170px;\n        background: #fff;\n        border-radius: 10px;\n        box-shadow: 0 8px 32px rgba(0,112,243,0.13), 0 1.5px 6px rgba(0,0,0,0.07);\n        border: 1.5px solid #e0e6ed;\n        z-index: 2147483646 !important;\n        padding: 8px 0;\n        display: none;\n        flex-direction: column;\n        animation: fadeInDropdown 0.18s;\n        /* Novo: ajuste para garantir que o dropdown nunca fique fora da janela */\n        right: auto !important;\n        left: 0 !important;\n        top: 36px !important;\n        max-width: 90vw;\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    .gherkin-action-dropdown.open {\n        display: flex !important;\n    }\n    .gherkin-action-dropdown button,\n    .gherkin-action-dropdown .gherkin-action-item {\n        background: none;\n        border: none;\n        width: 100%;\n        text-align: left;\n        padding: 10px 18px;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n        transition: background 0.18s, color 0.18s;\n        border-radius: 0;\n        display: flex;\n        align-items: center;\n        gap: 10px;\n    }\n    .gherkin-action-dropdown button:hover,\n    .gherkin-action-dropdown .gherkin-action-item:hover {\n        background: #f7faff;\n        color: #0070f3;\n    }\n    .gherkin-action-dropdown .gherkin-action-separator {\n        height: 1px;\n        background: #e0e6ed;\n        margin: 4px 0;\n        border: none;\n    }\n    @keyframes fadeInDropdown {\n        from { opacity: 0; transform: translateY(-8px);}\n        to { opacity: 1; transform: translateY(0);}\n    }\n\n    /* Painel de logs aprimorado */\n    .gherkin-log-panel {\n        background: #f9fbfd;\n        border-radius: 10px;\n        border: 1.5px solid #e0e6ed;\n        padding: 12px 0 6px 0;\n        margin-bottom: 10px;\n        max-height: 260px;\n        overflow-y: auto;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        font-size: 0.98rem;\n        scrollbar-width: thin;\n        scrollbar-color: #0070f3 #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar {\n        width: 8px;\n        background: #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar-thumb {\n        background: #e0e6ed;\n        border-radius: 6px;\n    }\n    .gherkin-log-list {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    .gherkin-log-item {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        padding: 10px 18px 10px 16px;\n        border-bottom: 1px solid #e0e6ed;\n        background: transparent;\n        transition: background 0.15s;\n        position: relative;\n    }\n    .gherkin-log-item:last-child {\n        border-bottom: none;\n    }\n    .gherkin-log-item:hover {\n        background: #f7faff;\n    }\n    .gherkin-log-icon {\n        font-size: 1.25em;\n        width: 28px;\n        height: 28px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        background: #eaf6ff;\n        color: #0070f3;\n        flex-shrink: 0;\n    }\n    .gherkin-log-item[data-action="preenche"] .gherkin-log-icon { background: #f6f9e8; color: #28a745; }\n    .gherkin-log-item[data-action="upload"] .gherkin-log-icon { background: #fff6e6; color: #f39c12; }\n    .gherkin-log-item[data-action="login"] .gherkin-log-icon { background: #f6e8f9; color: #8e44ad; }\n    .gherkin-log-item[data-action="clica"] .gherkin-log-icon { background: #eafaf1; color: #218838; }\n    .gherkin-log-item[data-action="espera"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-item[data-action="espera_elemento"] .gherkin-log-icon { background: #f7faff; color: #0070f3; }\n    .gherkin-log-item[data-action="acessa_url"] .gherkin-log-icon { background: #eaf6ff; color: #0070f3; }\n    .gherkin-log-item[data-action="seleciona"] .gherkin-log-icon { background: #f6f9e8; color: #218838; }\n    .gherkin-log-item[data-action="espera_nao_existe"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-content {\n        flex: 1 1 auto;\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n    }\n    .gherkin-log-title {\n        font-weight: 600;\n        color: #222;\n        font-size: 1.01em;\n        margin-bottom: 2px;\n    }\n    .gherkin-log-desc {\n        color: #555;\n        font-size: 0.97em;\n        margin-bottom: 0;\n    }\n    .gherkin-log-meta {\n        color: #888;\n        font-size: 0.93em;\n        margin-top: 2px;\n    }\n    /* Ajuste para dropdown não sair da tela */\n    .gherkin-action-dropdown {\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    @media (max-width: 600px) {\n        .gherkin-action-dropdown {\n            left: 0 !important;\n            right: auto !important;\n            max-width: 96vw;\n        }\n        .gherkin-log-panel {\n            max-height: 40vw;\n        }\n    }\n    ',document.head.appendChild(p)}function m(e){try{if(!window.isRecording||window.isPaused)return;if(!r())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content")||"gherkin-feature-name"===e.target.id||e.target.classList&&e.target.classList.contains("gherkin-feature-name")||e.target.closest&&e.target.closest(".gherkin-feature-name"))return;var n=document.getElementById("gherkin-action-select"),t="preenche";if(n&&n.selectedIndex>=0&&(t=n.value),"preenche"===t){if(window.__gherkinPreencheBlurChangeHandler||(window.__gherkinPreencheBlurChangeHandler=function(e){if(window.isRecording&&!window.isPaused&&r()){var n=e.target;if("P-INPUTNUMBER"===n.tagName||n.classList&&n.classList.contains("p-inputnumber")){var t=n.querySelector("input.p-inputnumber-input, input.p-inputtext");t&&(n=t)}if("keydown"!==e.type||"Tab"===e.key){var a=o(n),i=f(n),c="";if(n.getAttribute("aria-label"))c=n.getAttribute("aria-label");else if(n.getAttribute("placeholder"))c=n.getAttribute("placeholder");else if(n.getAttribute("name"))c=n.getAttribute("name");else if(n.id){var l=document.querySelector('label[for="'+n.id+'"]');c=l&&l.textContent?l.textContent.trim():n.id}else if(n.closest){var s=n.closest("label");c=s&&s.textContent?s.textContent.trim():n.className?n.className:n.tagName}else c=n.className?n.className:n.tagName;c=(c||"").toString().trim();var u="";void 0!==n.value?u=n.value:void 0!==n.innerText?u=n.innerText:void 0!==n.textContent&&(u=n.textContent);var d="Then",p=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(p=1),0===window.interactions.length?d="Given":1===window.interactions.length&&0===p||1===window.interactions.length&&1===p?d="When":2===window.interactions.length&&1===p&&(d="Then");var m=window.interactions[window.interactions.length-1];m&&"preenche"===m.acao&&m.cssSelector===a&&m.nomeElemento===c&&m.valorPreenchido===u||(window.interactions.push({step:d,acao:"preenche",acaoTexto:"Preencher",nomeElemento:c,cssSelector:a,xpath:i,valorPreenchido:u,timestamp:Date.now()}),"function"==typeof window.saveInteractionsToStorage&&window.saveInteractionsToStorage())}}}),window.__gherkinPreencheKeydownHandler||(window.__gherkinPreencheKeydownHandler=function(e){"Tab"===e.key&&setTimeout((function(){window.__gherkinPreencheBlurChangeHandler(e)}),0)}),e.target.removeEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),e.target.removeEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),e.target.removeEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0),e.target.closest&&e.target.closest("p-inputnumber")){var a=e.target.closest("p-inputnumber");a.removeEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),a.removeEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),a.removeEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0)}if(e.target.addEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),e.target.addEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),e.target.addEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0),e.target.closest&&e.target.closest("p-inputnumber")){var i=e.target.closest("p-inputnumber");i.addEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),i.addEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),i.addEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0)}return}}catch(e){console.error("Erro no handleInputEvent:",e)}}if(void 0===window.lastInputTarget&&(window.lastInputTarget=null),void 0===window.inputDebounceTimeout&&(window.inputDebounceTimeout=null),void 0===window.lastInputValue&&(window.lastInputValue=""),setTimeout((function(){window.panel,window.panel.querySelector(".gherkin-panel-header")&&window.panel;var e=document.getElementById("gherkin-action-select");e&&(e.addEventListener("change",(function(){window.panel})),window.panel)}),100),document.addEventListener("click",(function(e){if(window.isRecording&&!window.isPaused)try{if(!r())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if("INPUT"===e.target.tagName&&"file"===e.target.type){var n=o(e.target),a=f(e.target),i=(e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.id||e.target.className||e.target.tagName).toString().trim();return i||(i=e.target.tagName),void("function"==typeof window.showUploadModal?window.showUploadModal(i,n,a,(function(e){e&&l((function(t){var o=(t.templateUpload||'When faz upload do arquivo "{arquivo}" no campo {elemento}').replace("{arquivo}",e).replace("{elemento}",i);window.interactions.push({step:"When",acao:"upload",acaoTexto:"Upload de arquivo",nomeElemento:i,cssSelector:n,xpath:a,nomeArquivo:e,stepText:o,timestamp:Date.now()})}))})):t("Função de upload não disponível!","error"))}if("INPUT"===e.target.tagName&&"file"!==e.target.type||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)return;var c=!1;if("BUTTON"===e.target.tagName||"submit"===e.target.type){var s=e.target.closest("form");if(s){var p=s.querySelectorAll("input"),m=!1,g=!1;p.forEach((function(e){var n=e.getAttribute("type")||"",t=(e.getAttribute("name")||"").toLowerCase();("password"===n||t.includes("senha")||t.includes("password"))&&(g=!0),("text"===n||"email"===n||t.includes("user")||t.includes("email"))&&(m=!0)})),m&&g&&(c=!0)}}var h=e.target,v=document.getElementById("gherkin-action-select"),x=v?v.options[v.selectedIndex].text:"Clicar",b=v?v.value:"clica";if("preenche"===b){var w=function(e){if(!e)return null;if(function(e){if(!e)return!1;if("P-INPUTNUMBER"===e.tagName||e.classList&&(e.classList.contains("p-inputnumber")||e.classList.contains("p-inputnumber-input")||e.classList.contains("p-inputwrapper")))return!0;if("INPUT"===e.tagName){var n=(e.type||"").toLowerCase();if(["text","email","password","search","tel","url","number","date","datetime-local","month","time","week"].includes(n))return!0;if(e.getAttribute("inputmode")&&["decimal","numeric"].includes(e.getAttribute("inputmode")))return!0;if("spinbutton"===e.getAttribute("role"))return!0;var t=(e.className||"").split(/\s+/);if(t.includes("p-inputtext")||t.includes("p-inputnumber-input"))return!0}return"TEXTAREA"===e.tagName||!!e.isContentEditable}(e))return e;var n=e.querySelector&&e.querySelector('input:not([type=file]), textarea, [contenteditable="true"], .p-inputnumber-input, .p-inputtext');if(n)return n;var t=e.querySelector&&e.querySelector("p-inputnumber");if(t){var o=t.querySelector("input.p-inputnumber-input, input.p-inputtext");if(o)return o}return null}(e.target);w&&(h=w)}var E=o(h),k=f(h),D=h.getAttribute("aria-label")||h.getAttribute("name")||h.id||h.className||h.tagName;"string"==typeof D&&(D=D.trim()),D||(D=h.tagName);var y="";"string"==typeof h.innerText&&h.innerText.trim()?y=h.innerText.trim():"string"==typeof h.textContent&&h.textContent.trim()&&(y=h.textContent.trim()),!y||D&&D.includes(y)||(D?D+=" | ".concat(y):D=y);var C="";void 0!==h.value?C=h.value:void 0!==h.innerText?C=h.innerText:void 0!==h.textContent&&(C=h.textContent);var F={};if("espera_segundos"===b){var A=document.getElementById("gherkin-wait-seconds"),_=1;A&&A.value&&(_=parseInt(A.value,10),(isNaN(_)||_<1)&&(_=1)),F.tempoEspera=_}if("espera_elemento"===b&&(F.esperaSeletor=E),"login"===b||c){var S="",B="",T=e.target.closest("form");return T&&T.querySelectorAll("input").forEach((function(e){var n=e.getAttribute("type")||"",t=(e.getAttribute("name")||"").toLowerCase();S||"text"!==n&&"email"!==n&&!t.includes("user")&&!t.includes("email")||(S=o(e)),B||"password"!==n&&!t.includes("senha")&&!t.includes("password")||(B=o(e))})),void l((function(e){var n=e.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"';window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:"login",userField:S,passField:B,cssSelector:E,xpath:k,stepText:n,timestamp:Date.now()})}))}var P=window.interactions[window.interactions.length-1],N=!1;if("preenche"===b?N=P&&P.acao===b&&P.cssSelector===E&&P.nomeElemento===D&&P.valorPreenchido===C&&P.xpath===k:(N=P&&P.acao===b&&P.cssSelector===E&&P.nomeElemento===D,"espera_segundos"===b&&P&&void 0!==P.tempoEspera&&(N=N&&P.tempoEspera===F.tempoEspera),"espera_elemento"===b&&P&&P.esperaSeletor&&(N=N&&P.esperaSeletor===F.esperaSeletor)),N)return;var L,O;if(O=0===window.interactions.length?"Given":"When",window.givenAcessaUrlAdded=!1,L=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}("preenche"===b?{step:O,acao:b,acaoTexto:x,nomeElemento:D,cssSelector:E,xpath:k,valorPreenchido:C,timestamp:Date.now()}:{step:O,acao:b,acaoTexto:x,nomeElemento:D,cssSelector:E,xpath:k,timestamp:Date.now()},F),window.interactions.push(L),window.interactions.length>0){if(window.interactions[0].step="Given",window.interactions.length>2)for(var R=1;R<window.interactions.length-1;R++)window.interactions[R].step="When";window.interactions.length>1&&(window.interactions[window.interactions.length-1].step="Then")}}catch(e){console.error("Erro ao registrar clique:",e)}})),"function"!=typeof window.saveInteractionsToStorage&&("function"==typeof saveInteractionsToStorage?window.saveInteractionsToStorage=saveInteractionsToStorage:window.saveInteractionsToStorage=function(){}),document.removeEventListener("input",m,!0),document.addEventListener("input",m,!0),void 0!==a){var g=a;a=function(e){g(e),"gravando"===window.gherkinPanelState&&setTimeout(i,10),e.querySelector(".gherkin-panel-header")}}function f(e){if(!e||1!==e.nodeType)return"";if(e.id&&1===document.querySelectorAll("#".concat(CSS.escape(e.id))).length)return'//*[@id="'.concat(e.id,'"]');if(e.name&&1===document.querySelectorAll('[name="'.concat(e.name,'"]')).length)return'//*[@name="'.concat(e.name,'"]');function n(e){return-1===e.indexOf('"')?'"'+e+'"':-1===e.indexOf("'")?"'"+e+"'":'concat("'+e.replace(/"/g,'", \'"\', "')+'")'}function t(e){var t=[];if(e.getAttribute("type")&&t.push("@type=".concat(n(e.getAttribute("type")))),e.getAttribute("role")&&t.push("@role=".concat(n(e.getAttribute("role")))),e.getAttribute("aria-label")&&t.push("@aria-label=".concat(n(e.getAttribute("aria-label")))),e.getAttribute("placeholder")&&t.push("@placeholder=".concat(n(e.getAttribute("placeholder")))),e.getAttribute("data-testid")&&t.push("@data-testid=".concat(n(e.getAttribute("data-testid")))),e.className&&"string"==typeof e.className){var o=e.className.trim().split(/\s+/).filter(Boolean);1===o.length&&t.push("contains(concat(' ',normalize-space(@class),' '), ' ".concat(o[0]," ')"))}return t.length?"["+t.join(" and ")+"]":""}for(var o="",r=e;r&&1===r.nodeType&&r!==document.body&&r!==document.documentElement;){var a=r.tagName.toLowerCase(),i=t(r);if(i){var c="//"+a+i;try{if(1===document.evaluate(c,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength){o="/"+a+i+o;break}}catch(e){}}var l=Array.from(r.parentNode?r.parentNode.children:[]).filter((function(e){return e.tagName===r.tagName}));if(1===l.length)o="/"+a+o;else{var s=l.indexOf(r)+1;o="/"+a+"[".concat(s,"]")+o}r=r.parentNode}return"."+o}window.exportSelectedFeatures=function(o){showSpinner("Exportando arquivos..."),l((function(r){if(window.gherkinFeatures&&Array.isArray(window.gherkinFeatures)){var a=window.gherkinFeatures.filter((function(e,n){return o.includes(n)}));0!==a.length?(a.forEach((function(e){var t=(e.name||"").normalize("NFD").replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"_").replace(/^_+|_+$/g,"").toLowerCase(),o="Feature: ".concat(e.name,"\n");(e.cenarios||[]).forEach((function(e,n){o+="  Scenario: ".concat(e.name,"\n"),(e.interactions||[]).forEach((function(e,n){var t="",r=e.step||"When";if("Given"===r&&"acessa_url"===e.acao&&e.nomeElemento&&e.nomeElemento.startsWith("http"))t='que o usuário acessa a página "'.concat(e.nomeElemento,'"');else if(e.stepText)t=e.stepText;else if("preenche"===e.acao){var a=void 0!==e.valorPreenchido&&null!==e.valorPreenchido&&""!==e.valorPreenchido?e.valorPreenchido:"<valor>";t="o usuário preenche o campo ".concat(e.nomeElemento?'"'+e.nomeElemento+'"':"",' com "').concat(a,'"')}else if("clica"===e.acao)t="o usuário clica no elemento ".concat(e.nomeElemento?'"'+e.nomeElemento+'"':"");else if("upload"===e.acao){var i=void 0!==e.nomeArquivo&&null!==e.nomeArquivo&&""!==e.nomeArquivo?e.nomeArquivo:"<arquivo>";t='o usuário faz upload do arquivo "'.concat(i,'" no campo ').concat(e.nomeElemento?'"'+e.nomeElemento+'"':"")}else t="espera_elemento"===e.acao?"o usuário espera o elemento ".concat(e.nomeElemento?'"'+e.nomeElemento+'"':""," aparecer"):"espera_segundos"===e.acao?"o usuário espera ".concat(e.tempoEspera||"<segundos>"," segundos"):e.acao&&e.acao.toLowerCase().includes("valida")?"o usuário valida que existe o elemento ".concat(e.nomeElemento?'"'+e.nomeElemento+'"':""):"".concat(e.acaoTexto||e.acao||"ação"," no elemento ").concat(e.nomeElemento?'"'+e.nomeElemento+'"':"");var c=r.charAt(0).toUpperCase()+r.slice(1).toLowerCase();o+="    ".concat(c," ").concat(t,"\n")})),o+="\n"})),n("".concat(t,".feature"),o)})),a.forEach((function(t){var o="# Feature: ".concat(t.name,"\n\n## Descrição do fluxo\nEsta feature cobre o(s) seguinte(s) cenário(s):\n\n");(t.cenarios||[]).forEach((function(e){o+="### Cenário: ".concat(e.name,"\n"),o+="**Fluxo resumido:**\n",(e.interactions||[]).forEach((function(e){var n=e.step||"",t=e.acaoTexto||e.acao||"",r=e.nomeElemento||"",a=e.valorPreenchido?' (valor: "'.concat(e.valorPreenchido,'")'):"",i="";"upload"===e.acao&&e.nomeArquivo&&(i=" (arquivo: ".concat(e.nomeArquivo,")")),o+="- ".concat(n," ").concat(t,' em "').concat(r,'"').concat(a).concat(i,"\n")})),o+="\n"})),o+="## Como executar os testes\n",o+="1. Instale as dependências:\n",o+="   ```bash\n   pip install -r requirements.txt\n   ```\n",o+="2. Execute os testes com o Behave:\n",o+="   ```bash\n   behave\n   ```\n\n",o+="## Pré-requisitos\n",o+="- Navegador Google Chrome com extensão Selenium WebDriver instalada (ou ambiente Python/Selenium configurado)\n",o+="- Acesso ao ambiente de testes\n\n",o+="## Exemplo de execução (Python + Selenium)\n",o+="```python\n",o+="# Exemplo básico de inicialização do Selenium\n",o+="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n",o+="driver = webdriver.Chrome()\n",o+='driver.get("URL_DO_SISTEMA")\n',o+="# ...seguir os passos do cenário conforme descrito acima...\n",o+="```\n\n",o+="## Observações\n",o+="- Adapte os seletores e valores conforme necessário para o seu ambiente.\n",o+="- Prints das telas podem ser adicionados manualmente após a execução dos testes.\n",o+="- Consulte os arquivos `pages.py`, `steps.py` e `environment.py` para customizações avançadas.\n",n("README_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".md"),o);var r=new Set,a={};(t.cenarios||[]).forEach((function(e){(e.interactions||[]).forEach((function(e){if(e.cssSelector){var n="";e.nomeElemento&&(n=e.nomeElemento.split("|")[0].trim().replace(/[^a-zA-Z0-9_]/g,"_").replace(/^_+|_+$/g,"")),n||(n="ELEMENTO_"+Math.random().toString(36).substring(2,8));for(var t=n,o=1;r.has(n);)n=t+"_"+o,o++;r.add(n),a[n]=e.cssSelector}}))}));var i=e(t.name),c="# ".concat(i,'_pages.py gerado automaticamente para a feature "').concat(t.name,'"\n# -*- coding: utf-8 -*-\n"""\nPage Object Model (POM) para a feature "').concat(t.name,'".\nContém classes de locators e métodos de interação para uso nos steps do Behave.\nInclui tratamento de exceções para maior robustez.\n"""\n\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import NoSuchElementException, TimeoutException, ElementNotInteractableException\n\nclass Locators').concat(e(t.name),':\n    """\n    Locators para os elementos da feature "').concat(t.name,'".\n    """\n').concat(0===r.size?"    # Nenhum locator identificado":Array.from(r).map((function(e){return"    ".concat(e," = (By.CSS_SELECTOR, '").concat(a[e],"')")})).join("\n"),"\n\nclass Page").concat(e(t.name),':\n    """\n    Classe de Page Object para interações genéricas da feature "').concat(t.name,'".\n    """\n\n    def __init__(self, driver):\n        """\n        Inicializa o Page Object com o driver do Selenium.\n        """\n        self.driver = driver\n\n    def acessar_url(self, url):\n        """\n        Acessa a URL informada.\n        """\n        try:\n            self.driver.get(url)\n        except Exception as e:\n            print(f"[ERRO] Falha ao acessar URL \'{url}\': {e}")\n            raise\n\n    def clicar(self, locator):\n        """\n        Clica no elemento identificado pelo locator.\n        """\n        try {\n            this.driver.find_element(*locator).click();\n        } catch (NoSuchElementException e) {\n            print(f"[ERRO] Elemento {locator} não encontrado: {e}")\n            raise\n        } catch (ElementNotInteractableException e) {\n            print(f"[ERRO] Elemento {locator} não interagível: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao clicar em {locator}: {e}")\n            raise\n        }\n    }\n\n    def preencher(self, locator, valor):\n        """\n        Preenche o campo identificado pelo locator com o valor informado.\n        """\n        try {\n            el = this.driver.find_element(*locator);\n            el.clear();\n            el.send_keys(valor);\n        } catch (NoSuchElementException e) {\n            print(f"[ERRO] Elemento {locator} não encontrado: {e}")\n            raise\n        } catch (ElementNotInteractableException e) {\n            print(f"[ERRO] Elemento {locator} não interagível: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao preencher {locator}: {e}")\n            raise\n        }\n    }\n\n    def selecionar(self, locator, valor):\n        """\n        Seleciona o valor informado em um campo select identificado pelo locator.\n        """\n        try {\n            from selenium.webdriver.support.ui import Select\n            select = Select(this.driver.find_element(*locator))\n            select.select_by_visible_text(valor)\n        } catch (NoSuchElementException e) {\n            print(f"[ERRO] Elemento {locator} não encontrado: {e}")\n            raise\n        } catch (ElementNotInteractableException e) {\n            print(f"[ERRO] Elemento {locator} não interagível: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao selecionar {valor} em {locator}: {e}")\n            raise\n        }\n    }\n\n    def upload_arquivo(self, locator, caminho_arquivo):\n        """\n        Realiza upload de arquivo no campo identificado pelo locator.\n        """\n        try {\n            this.driver.find_element(*locator).send_keys(caminho_arquivo);\n        } catch (NoSuchElementException e) {\n            print(f"[ERRO] Elemento {locator} não encontrado: {e}")\n            raise\n        } catch (ElementNotInteractableException e) {\n            print(f"[ERRO] Elemento {locator} não interagível: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao fazer upload do arquivo {caminho_arquivo} em {locator}: {e}")\n            raise\n        }\n    }\n\n    def esperar_elemento(self, locator, timeout=10):\n        """\n        Aguarda até que o elemento esteja presente na tela.\n        """\n        try {\n            from selenium.webdriver.support.ui import WebDriverWait\n            from selenium.webdriver.support import expected_conditions as EC\n            WebDriverWait(this.driver, timeout).until(EC.presence_of_element_located(locator))\n        } catch (TimeoutException e) {\n            print(f"[ERRO] Timeout ao esperar elemento {locator}: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao esperar elemento {locator}: {e}")\n            raise\n        }\n    }\n\n    def esperar_elemento_desaparecer(self, locator, timeout=10):\n        """\n        Aguarda até que o elemento desapareça da tela.\n        """\n        try {\n            from selenium.webdriver.support.ui import WebDriverWait\n            from selenium.webdriver.support import expected_conditions as EC\n            WebDriverWait(this.driver, timeout).until_not(EC.presence_of_element_located(locator))\n        } catch (TimeoutException e) {\n            print(f"[ERRO] Timeout ao esperar desaparecimento do elemento {locator}: {e}")\n            raise\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao esperar desaparecimento do elemento {locator}: {e}")\n            raise\n        }\n    }\n\n    def validar_existencia(self, locator):\n        """\n        Valida se o elemento identificado pelo locator existe na página.\n        """\n        try {\n            this.driver.find_element(*locator)\n            return True\n        } catch (NoSuchElementException e) {\n            return False\n        } catch (Exception e) {\n            print(f"[ERRO] Erro inesperado ao validar existência do elemento {locator}: {e}")\n            raise\n        }\n    }\n\n    # Adicione outros métodos genéricos conforme necessário\n');n("".concat(i,"_pages.py"),c);var l="# ".concat(t.name,"_steps.py gerado automaticamente\n");l+='# -*- coding: utf-8 -*-\n"""\nArquivo de steps do Behave para a feature "'.concat(t.name,'".\nUtiliza Page Object Model e locators definidos em pages.py.\n"""\n\n'),l+="from behave import given, when, then\n",l+="from pages.".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_pages import Page").concat(e(t.name),", Locators").concat(e(t.name),"\n\n"),l+="@given('que o usuário acessa a página \"{url}\"')\ndef step_acessa_pagina_inicial(context, url):\n    context.page = Page".concat(e(t.name),"(context.driver)\n    context.page.acessar_url(url)\n\n");var s=new Set;(t.cenarios||[]).forEach((function(n,o){(n.interactions||[]).forEach((function(n,a){var i=function(e){var n="";return e.nomeElemento&&(n=e.nomeElemento.split("|")[0].trim().replace(/[^a-zA-Z0-9_]/g,"_").replace(/^_+|_+$/g,"")),n||(n="ELEMENTO_"+Math.random().toString(36).substring(2,8)),n}(n);if(r.has(i)){var c="".concat(n.acao,"|").concat(i,"|").concat(n.stepText||"","|").concat(n.nomeElemento||"");if(!s.has(c)){s.add(c);var u,d,p,m="",g="";if(p=n.stepText?n.stepText:"preenche"===n.acao?"o usuário preenche o campo ".concat(n.nomeElemento?'"'+n.nomeElemento+'"':"",' com "{valor}"'):"clica"===n.acao?"o usuário clica no elemento ".concat(n.nomeElemento?'"'+n.nomeElemento+'"':""):"upload"===n.acao?'o usuário faz upload do arquivo "{arquivo}" no campo '.concat(n.nomeElemento?'"'+n.nomeElemento+'"':""):"espera_elemento"===n.acao?"o usuário espera o elemento ".concat(n.nomeElemento?'"'+n.nomeElemento+'"':""," aparecer"):"espera_segundos"===n.acao?"o usuário espera ".concat(n.tempoEspera||"{segundos}"," segundos"):n.acao&&n.acao.toLowerCase().includes("valida")?"o usuário valida que existe o elemento ".concat(n.nomeElemento?'"'+n.nomeElemento+'"':""):"".concat(n.acaoTexto||n.acao||"ação"," no elemento ").concat(n.nomeElemento?'"'+n.nomeElemento+'"':""),d="Given"===n.step?"@given":"Then"===n.step?"@then":"@when",u="step_".concat(n.acao,"_").concat(i,"_").concat(o,"_").concat(a),"preenche"===n.acao)g="context, valor",m="    context.page.preencher(Locators".concat(e(t.name),".").concat(i,", valor)");else if("upload"===n.acao)g="context, arquivo",m="    context.page.upload_arquivo(Locators".concat(e(t.name),".").concat(i,", arquivo)");else if("espera_segundos"===n.acao){g="context";var f=n.tempoEspera||1;m="    import time\n    time.sleep(".concat(f,")")}else"espera_elemento"===n.acao?(g="context",m="    context.page.esperar_elemento(Locators".concat(e(t.name),".").concat(i,")")):"clica"===n.acao?(g="context",m="    context.page.clicar(Locators".concat(e(t.name),".").concat(i,")")):n.acao&&n.acao.toLowerCase().includes("valida")?(g="context",m="    assert context.page.validar_existencia(Locators".concat(e(t.name),".").concat(i,")\n")):(g="context",m="    # Implemente a ação '".concat(n.acaoTexto||n.acao,"' para o locator '").concat(i,"'"));l+="".concat(d,"('").concat(p,"')\ndef ").concat(u,"(").concat(g,"):\n").concat(m,"\n\n")}}}))})),l+="# Adicione outros steps conforme necessário, usando os métodos e locators definidos em pages.py\n",n("".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_steps.py"),l),n("environment.py",'# environment.py gerado automaticamente para a feature "'.concat(t.name,'"\n# -*- coding: utf-8 -*-\n"""\nArquivo de configuração do Behave para a feature "').concat(t.name,'".\nResponsável por inicializar e finalizar o driver do Selenium, além de capturar screenshots em caso de falha.\n"""\n\nimport os\nimport logging\nfrom selenium import webdriver\nfrom selenium.common.exceptions import WebDriverException\nfrom webdriver_manager.chrome import ChromeDriverManager\nfrom webdriver_manager.firefox import GeckoDriverManager\nfrom webdriver_manager.microsoft import EdgeChromiumDriverManager\n\ndef before_all(context):\n    """\n    Inicializa o driver do Selenium antes de todos os testes.\n    """\n    logging.basicConfig(\n        level=logging.INFO,\n        format="%(asctime)s [%(levelname)s] %(message)s",\n        handlers=[logging.StreamHandler()]\n    )\n    browser = os.getenv("BROWSER", "chrome").lower()\n    try:\n        if browser == "chrome":\n            from selenium.webdriver.chrome.service import Service as ChromeService\n            from selenium.webdriver.chrome.options import Options as ChromeOptions\n            options = ChromeOptions()\n            options.add_argument("--start-maximized")\n            context.driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)\n        elif browser == "firefox":\n            from selenium.webdriver.firefox.service import Service as FirefoxService\n            from selenium.webdriver.firefox.options import Options as FirefoxOptions\n            options = FirefoxOptions()\n            options.add_argument("--width=1920")\n            options.add_argument("--height=1080")\n            context.driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)\n        elif browser == "edge":\n            from selenium.webdriver.edge.service import Service as EdgeService\n            from selenium.webdriver.edge.options import Options as EdgeOptions\n            options = EdgeOptions()\n            context.driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)\n        else:\n            raise ValueError(f"Navegador não suportado: {browser}")\n        logging.info(f"Driver iniciado com sucesso ({browser})")\n    } catch (WebDriverException e) {\n        logging.error(f"Erro ao iniciar o driver: {e}")\n        raise\n    } catch (Exception e) {\n        logging.error(f"Erro inesperado: {e}")\n        raise\n    }\n\ndef after_step(context, step):\n    """\n    Tira screenshot em caso de falha no step.\n    """\n    if step.status == "failed":\n        try {\n            screenshots_dir = os.path.join(os.getcwd(), "screenshots")\n            os.makedirs(screenshots_dir, exist_ok=True)\n            filename = f"{step.name.replace(\' \', \'_\')}.png"\n            filepath = os.path.join(screenshots_dir, filename)\n            context.driver.save_screenshot(filepath)\n            logging.error(f"Step falhou. Screenshot salvo em: {filepath}")\n        } catch (Exception e) {\n            logging.error(f"Erro ao salvar screenshot: {e}")\n        }\n    }\n\ndef after_all(context):\n    """\n    Finaliza o driver após todos os testes.\n    """\n    try {\n        if hasattr(context, "driver"):\n            context.driver.quit()\n            logging.info("Driver finalizado com sucesso.")\n    } catch (Exception e) {\n        logging.error(f"Erro ao finalizar o driver: {e}")\n    }\n')),n("requirements_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".txt"),"# requirements.txt gerado automaticamente\nselenium\nbehave\nwebdriver-manager\npytest\npython-dotenv\ncolorama\npytest-bdd\nrequests\n")})),hideSpinner(),t("Exportação realizada com sucesso!")):t("Selecione ao menos uma feature!","error")}else t("Nenhuma feature para exportar!","error")}))},"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((function(e,n,t){"keepAlive"===e.action&&t({status:"alive"})})),window.renderLogWithActions=function(){var e=document.getElementById("gherkin-log-panel");if(e){e.innerHTML="";var n=document.createElement("ul");n.className="gherkin-log-list",window.interactions.forEach((function(e){var t=document.createElement("li");if(t.className="gherkin-log-item",t.dataset.action=e.acao||"","preenche"===e.acao){t.style.alignItems="center",t.style.gap="0";var o=document.createElement("span");o.style.flex="0 0 70px",o.style.fontWeight="bold",o.style.color="#0070f3",o.innerText=e.step||"",t.appendChild(o);var r=document.createElement("span");r.style.flex="0 0 110px",r.style.display="inline-flex",r.style.alignItems="center",r.innerHTML='<span class="gherkin-log-icon" style="margin-right:6px;">📝</span>'.concat(e.acaoTexto||"Preencher"),t.appendChild(r);var a=document.createElement("span");a.style.flex="0 0 120px",a.style.fontWeight="500",a.style.background="#f7faff",a.style.borderRadius="5px",a.style.padding="2px 10px",a.style.margin="0 8px 0 0",a.style.color="#222",a.style.fontSize="0.97em",a.innerText=e.nomeElemento||"",t.appendChild(a);var i=document.createElement("span");i.style.flex="0 0 auto",i.style.color="#555",i.style.fontSize="0.97em",i.style.marginRight="4px",i.innerText="o valor",t.appendChild(i);var c=document.createElement("span");c.style.flex="1",c.style.fontWeight="bold",c.style.background="#fff",c.style.border="1.5px solid #e0e6ed",c.style.borderRadius="5px",c.style.padding="2px 10px",c.style.color="#222",c.style.fontSize="0.97em",c.style.wordBreak="break-all",c.innerText=void 0!==e.valorPreenchido?e.valorPreenchido:"",t.appendChild(c)}else{var l=document.createElement("span");l.className="gherkin-log-icon",l.innerText=function(){switch(e.acao){case"preenche":return"📝";case"upload":return"📤";case"login":return"🔑";case"clica":return"🖱️";case"espera":return"⏳";case"espera_elemento":return"👁️";case"acessa_url":return"🌐";case"seleciona":return"✅";case"espera_nao_existe":return"🚫";default:return"🔹"}}(),t.appendChild(l);var s=document.createElement("div");s.className="gherkin-log-content";var u=document.createElement("div");u.className="gherkin-log-title",u.innerText="".concat(e.step||""," ").concat(e.acaoTexto||e.acao||""),s.appendChild(u);var d=document.createElement("div");if(d.className="gherkin-log-desc",d.innerText=e.nomeElemento||"",s.appendChild(d),void 0!==e.valorPreenchido&&"preenche"!==e.acao){var p=document.createElement("div");p.className="gherkin-log-meta",p.innerText='Valor: "'.concat(e.valorPreenchido,'"'),s.appendChild(p)}t.appendChild(s)}n.appendChild(t)})),e.appendChild(n)}},window.showEditModal=function(e,n){var t=null;if("preenche"===e.acao){var o=document.createElement("label");o.innerText="Valor preenchido:",o.setAttribute("for","gherkin-edit-valor-preenchido"),o.style.marginTop="8px",(t=document.createElement("input")).type="text",t.id="gherkin-edit-valor-preenchido",t.value=void 0!==e.valorPreenchido?e.valorPreenchido:"",t.style.marginBottom="12px",t.autocomplete="off",modalContent.appendChild(o),modalContent.appendChild(t)}saveBtn.onclick=function(){"preenche"===e.acao&&t&&(e.valorPreenchido=t.value)}}})();